/*! 
 Build based on gin-vue-admin 
 Time : 1654839698000 */
import{s as a}from"./gin-vue-admin-authority.16548396980002.js";import{W as e}from"./gin-vue-admin-warningBar.1654839698000.js";import{r as t,b as l,o as r,c as u,d as o,e as i,w as s,F as n,z as d,h,i as c,q as y,t as m}from"../gva/gin-vue-admin-index.1654839698000.js";const v={class:"clearflex",style:{margin:"18px"}},f=h("确 定"),p=h("全选"),g=h("本角色"),I=h("本角色及子角色"),w={name:"Datas"},x=Object.assign(w,{props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},emits:["changeRow"],setup(w,{expose:x,emit:b}){const A=w,k=t([]),C=t(!1),_=a=>{a&&a.forEach((a=>{const e={};e.authorityId=a.authorityId,e.authorityName=a.authorityName,k.value.push(e),a.children&&a.children.length&&_(a.children)}))},j=t([]);_(A.authority),A.row.dataAuthorityId&&A.row.dataAuthorityId.forEach((a=>{const e=k.value&&k.value.filter((e=>e.authorityId===a.authorityId))&&k.value.filter((e=>e.authorityId===a.authorityId))[0];j.value.push(e)}));const z=()=>{j.value=[...k.value],b("changeRow","dataAuthorityId",j.value),C.value=!0},R=()=>{j.value=k.value.filter((a=>a.authorityId===A.row.authorityId)),b("changeRow","dataAuthorityId",j.value),C.value=!0},N=()=>{const a=[];E(A.row,a),j.value=k.value.filter((e=>a.indexOf(e.authorityId)>-1)),b("changeRow","dataAuthorityId",j.value),C.value=!0},E=(a,e)=>{e.push(a.authorityId),a.children&&a.children.forEach((a=>{E(a,e)}))},O=()=>{return e=this,t=null,l=function*(){0===(yield a(A.row)).code&&c({type:"success",message:"资源设置成功"})},new Promise(((a,r)=>{var u=a=>{try{i(l.next(a))}catch(e){r(e)}},o=a=>{try{i(l.throw(a))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(u,o);i((l=l.apply(e,t)).next())}));var e,t,l},V=()=>{b("changeRow","dataAuthorityId",j.value),C.value=!0};return x({enterAndNext:()=>{O()},needConfirm:C}),(a,t)=>{const c=l("el-button"),w=l("el-checkbox"),x=l("el-checkbox-group");return r(),u("div",null,[o("div",v,[i(c,{class:"fl-right",size:"small",type:"primary",onClick:O},{default:s((()=>[f])),_:1}),i(c,{class:"fl-left",size:"small",type:"primary",onClick:z},{default:s((()=>[p])),_:1}),i(c,{class:"fl-left",size:"small",type:"primary",onClick:R},{default:s((()=>[g])),_:1}),i(c,{class:"fl-left",size:"small",type:"primary",onClick:N},{default:s((()=>[I])),_:1})]),i(x,{modelValue:j.value,"onUpdate:modelValue":t[0]||(t[0]=a=>j.value=a),onChange:V},{default:s((()=>[(r(!0),u(n,null,d(k.value,((a,e)=>(r(),y(w,{key:e,label:a},{default:s((()=>[h(m(a.authorityName),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"]),i(e,{title:"此功能仅用于创建角色和角色的many2many关系表，具体使用还须自己结合表实现业务，详情参考示例代码（客户示例）"})])}}});export{x as default};
